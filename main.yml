---
- hosts: all
  vars_files: [ "vars/{{ ansible_os_family }}.yml" ]
  sudo: True
  roles:
  - base
  - git

- hosts: webserver
  vars_files: [ "vars/{{ ansible_os_family }}.yml" ]
  sudo: True
  roles:
  - apache2
  - php
  - phpmyadmin

- hosts: webserver
  vars_files: [ "vars/{{ ansible_os_family }}.yml" ]
  roles:
  - websites

- hosts: database
  vars_files: [ "vars/{{ ansible_os_family }}.yml" ]
  sudo: True
  roles:
  - mysql

- hosts: developer
  vars_files: [ "vars/{{ ansible_os_family }}.yml" ]
  sudo: True
  roles:
  - developer
  - node
  - ssh

# Set up a firewall on the server
- hosts: all
  vars_files: [ "vars/{{ ansible_os_family }}.yml" ]
  sudo: True
  roles:
  - firewall
